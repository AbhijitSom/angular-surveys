angular.module("mwFormUtils",["mwFormUtils.responseUtils"]);
angular.module("mwFormUtils.responseUtils",[]).factory("mwFormResponseUtils",function(){var e={};return e.$getObjectByIdMap=function(e,t){var r={};return e.forEach(function(e){var n=e;t&&(n=t(e)),r[e.id]=n}),r},e.$getOfferedAnswerByIdMap=function(t){return e.$getObjectByIdMap(t.offeredAnswers,function(e){return{id:e.id,value:e.value}})},e.$extractResponseForRadioOrCheckboxQuestion=function(t,r){var n=e.$getOfferedAnswerByIdMap(t),o={};return r.selectedAnswers?(o.selectedAnswers=[],r.selectedAnswers.forEach(function(e){o.selectedAnswers.push(n[e])})):r.selectedAnswer&&(o.selectedAnswer=n[r.selectedAnswer]),r.other&&(o.other=r.other),o},e.$extractResponseForPriorityQuestion=function(t,r){var n=[],o=e.$getObjectByIdMap(t.priorityList);return r.priorityList.forEach(function(e){var t=o[e.id];n.push({id:t.id,value:t.value})}),n},e.$extractResponseForDivisionQuestion=function(t,r){var n=[],o=e.$getObjectByIdMap(t.divisionList);return Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e],s=o[e];n.push({id:s.id,label:s.value,value:t})}),n},e.$extractResponseForGridQuestion=function(t,r){var n=[],o=e.$getObjectByIdMap(t.grid.cols);return t.grid.rows.forEach(function(e){var t=r[e.id];if(t){var s=o[t],i={row:{id:e.id,label:e.label},col:{id:s.id,label:s.label}};n.push(i)}}),n},e.extractResponse=function(t,r){return"text"==t.type||"textarea"==t.type?r.answer:"radio"==t.type||"checkbox"==t.type?e.$extractResponseForRadioOrCheckboxQuestion(t,r):"grid"==t.type?e.$extractResponseForGridQuestion(t,r):"priority"==t.type?e.$extractResponseForPriorityQuestion(t,r):"division"==t.type?e.$extractResponseForDivisionQuestion(t,r):null},e.mergeFormWithResponse=function(t,r){var n={};return angular.copy(t,n),n.pages.forEach(function(t){t.elements.forEach(function(t){var n=t.question;if(n){var o=r[n.id];o&&(n.response=e.extractResponse(n,o))}})}),n},e.getQuestionWithResponseList=function(t,r){var n=[];return t.pages.forEach(function(t){t.elements.forEach(function(t){if(t.question){var o={};angular.copy(t.question,o),n.push(o);var s=r[o.id];s&&(o.response=e.extractResponse(o,s))}})}),n},e});