angular.module("mwFormBuilder",["ngSanitize","ui.sortable","pascalprecht.translate"]);
angular.module("mwFormBuilder").service("mwFormUuid",function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}this.get=function(){return r()+r()+r()+r()+r()+r()+r()+r()}});
angular.module("mwFormBuilder").run(["$templateCache",function(e){e.put("mw-form-builder.html",'<div class=mw-form-builder><form name=ctrl.form role=form novalidate><div class=mw-title-page><div class=form-group><label for=formName translate=mwForm.form.name>Form name</label> <input type=text class=form-control name=formName id=formName ng-model=ctrl.formData.name ng-readonly=ctrl.readOnly placeholder="{{\'mwForm.form.name.placeholder\'|translate}}" required></div><div class=form-group><label for=formDescription translate=mwForm.form.description>Description</label> <textarea msd-elastic class=form-control name=formDescription ng-model=ctrl.formData.description id=formDescription ng-readonly=ctrl.readOnly>\r\n            </textarea></div></div><div class=form-page-list><mw-form-page-builder ng-repeat="page in ctrl.formData.pages" form-page=page form-object=ctrl.formData is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-builder></div><button type=button class="btn btn-default mw-add-new-page-button" ng-click=ctrl.addPage() ng-if=!ctrl.readOnly><i class="fa fa-plus"></i> <span translate=mwForm.buttons.addPage></span></button><mw-form-confirmation-page-builder form-object=ctrl.formData read-only=ctrl.readOnly></mw-form-confirmation-page-builder></form></div>'),e.put("mw-form-confirmation-page-builder.html",'<div class="mw-form-page-builder mw-confirmation-page"><div><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.confirmationPage.title>Strona potwierdzenia</span></div><div class=mw-page-tab-triangle></div></div><div ng-form=ctrl.form role=form novalidate class=form-page-builder-body><div class=form-group><textarea msd-elastic class=form-control name=confirmationMessage ng-model=ctrl.formObject.confirmationMessage aria-label="{{\'mwForm.confirmationPage.customMessage\'|translate}}" placeholder="{{\'mwForm.confirmationPage.customMessage\'|translate}}" ng-disabled=ctrl.readOnly></textarea></div></div></div></div>'),e.put("mw-form-image-builder.html",'<div class=mw-form-image-builder-wrapper><div class=mw-form-image-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div class=image-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><button ng-if=!ctrl.image.src ng-click=ctrl.selectImageButtonClicked() type=button class="btn btn-default" translate=mwForm.image.selectImageButton>Select image</button><div class="image-edition row" ng-if=ctrl.image.src><div class=col-md-12 ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}}></div><div class="col-md-12 image-align-control"><div class=btn-group role=group aria-label="Image align"><button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'left\'}" ng-click="ctrl.setAlign(\'left\')"><i class="fa fa-align-left"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'center\'}" ng-click="ctrl.setAlign(\'center\')"><i class="fa fa-align-center"></i></button> <button type=button class="btn btn-default" ng-class="{\'selected\': ctrl.image.align==\'right\'}" ng-click="ctrl.setAlign(\'right\')"><i class="fa fa-align-right"></i></button></div></div><div class=form-horizontal><div class=form-group><label ng-attr-for=image-caption-{{ctrl.id}} class="col-sm-2 control-label">Podpis</label><div class=col-sm-8><input type=text class=form-control name=text ng-attr-id=image-caption-{{ctrl.id}} ng-model=ctrl.image.caption ng-readonly=ctrl.readOnly></div></div></div></div><div class=row ng-if=ctrl.image.src><br><br><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><figure ng-class="\'align-\'+ctrl.image.align"><img ng-src={{ctrl.image.src}} ng-attr-alt=ctrl.image.caption><figcaption ng-if=ctrl.image.caption>{{ctrl.image.caption}}</figcaption></figure></div></div></div>'),e.put("mw-form-page-builder.html",'<div class=mw-form-page-builder><div ng-mouseover=ctrl.hoverIn() ng-mouseleave=ctrl.hoverOut()><div class=mw-page-tab-container><div class=mw-form-page-tab><span class=mw-page-tab-text role=heading translate=mwForm.page.tab.heading translate-values="{page: ctrl.formPage.number, allPages:ctrl.formObject.pages.length}">Strona 1 z 3</span> <span class=mw-page-tab-checkbox><label><input type=checkbox ng-model=ctrl.formPage.namedPage><span class=mw-page-tab-checkbox-text translate=mwForm.page.pageWithNameCheckbox>named</span></label></span></div><div class=mw-page-tab-triangle></div><div class=mw-page-tab-actions ng-if=!ctrl.readOnly><button type=button class=move-down-button ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}" popover="{{\'mwForm.buttons.moveDown\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-chevron-down"></i></button> <button type=button class=move-up-button ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}" popover="{{\'mwForm.buttons.moveUp\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-chevron-up"></i></button> <button type=button class=remove-button mw-confirm-click confirmed-action=ctrl.removePage() ng-attr-title="{{\'mwForm.buttons.removePage\' | translate}}" popover="{{\'mwForm.buttons.removePage\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-trash"></i></button></div></div><div ng-form=ctrl.form role=form novalidate class=form-page-builder-body><div class=form-group ng-if=ctrl.formPage.namedPage><label ng-attr-for=page-name-{{ctrl.formPage.number}} translate=mwForm.page.name>Nazwa strony</label> <input type=text class=form-control name=pageName ng-attr-id=page-name-{{ctrl.formPage.number}} ng-model=ctrl.formPage.name ng-readonly=ctrl.readOnly></div><div class=page-element-list ui-sortable=ctrl.sortableConfig ng-model=ctrl.formPage.elements><div class="empty-page-element-list-label form-group" ng-if="!ctrl.formPage.elements || (ctrl.formPage.elements && ctrl.formPage.elements.length == 0)"><span translate=mwForm.page.elements.empty>Brak element√≥w</span></div><mw-form-page-element-builder ng-repeat="element in ctrl.formPage.elements" page-element=element form-object=ctrl.formObject is-active=ctrl.isElementActive(element) on-ready=ctrl.onElementReady() ng-click=ctrl.selectElement(element) is-first=$first is-last=$last read-only=ctrl.readOnly></mw-form-page-element-builder></div><div class="add-element btn-group dropdown" ng-if=!ctrl.readOnly><button type=button class="btn btn-default" ng-click=ctrl.addElement()><span translate=mwForm.buttons.addElement>Add element</span></button> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-haspopup=true aria-expanded=false><span class=caret></span> <span class=sr-only>Split button!</span></button><ul class=dropdown-menu role=menu><li><button type=button ng-click=ctrl.addQuestion()><span translate=mwForm.elements.question>Pytanie</span><i class="fa fa-question-circle fa-lg fa-fw" style="margin-left: 10px;"></i></button></li><li><button type=button ng-click=ctrl.addImage()><span translate=mwForm.elements.image>Obraz</span><i class="fa fa-picture-o fa-lg fa-fw" style="margin-left: 10px;"></i></button></li><li><button type=button ng-click=ctrl.addParagraph()><span translate=mwForm.elements.paragraph>Obraz</span><i class="fa fa-paragraph fa-lg fa-fw" style="margin-left: 10px;"></i></button></li></ul></div></div><table cellspacing=0 class=mw-page-bottom-tab-container ng-if=!ctrl.isLast><tr><td class=mw-page-bottom-tab-triangle></td><td class=mw-form-page-bottom-tab><div class="page-flow-select form-inline"><label translate=mwForm.pageFlow.afterPage translate-values={page:ctrl.formPage.number} ng-attr-for=page-flow-select-{{ctrl.formPage.number}}>Po stronie 1</label><select ng-attr-id=page-flow-select-{{ctrl.formPage.number}} ng-options="pageFlow.label|translate:pageFlow for pageFlow in ctrl.possiblePageFlow" ng-model=ctrl.formPage.pageFlow class=form-control ng-disabled=ctrl.readOnly></select></div></td><td class=mw-page-bottom-tab-actions><button type=button role=button class=btn ng-click=ctrl.addPage() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.addPage\' | translate}}" popover="{{\'mwForm.buttons.addPage\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-plus"></i></button></td></tr></table></div></div>'),e.put("mw-form-page-element-builder.html",'<div class=mw-form-page-element-builder-wrapper><div class=mw-form-page-element-builder ng-class="{\'active\': ctrl.isActive, \'inactive draggable\': !ctrl.isActive}"><div class=mw-page-element-actions-tab ng-switch=ctrl.isActive&&!ctrl.readOnly><div ng-switch-when=true><button type=button class=move-down-button ng-click=ctrl.moveDown() ng-if=!ctrl.isLast ng-attr-title="{{\'mwForm.buttons.moveDown\' | translate}}" popover="{{\'mwForm.buttons.moveDown\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-chevron-down"></i></button> <button type=button class=move-up-button ng-click=ctrl.moveUp() ng-if=!ctrl.isFirst ng-attr-title="{{\'mwForm.buttons.moveUp\' | translate}}" popover="{{\'mwForm.buttons.moveUp\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-chevron-up"></i></button> <button type=button class=remove-button mw-confirm-click confirmed-action=ctrl.removeElement() ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=left><i class="fa fa-trash"></i></button></div><div ng-switch-when=false><button type=button aria-label="Edytuj element" aria-hidden=false class=edit-button ng-click=ctrl.editElement() ng-if=!ctrl.readOnly><i class="fa fa-pencil"></i></button> <button type=button aria-label="Wy≈õwietl element" aria-hidden=false class=edit-button ng-click=ctrl.editElement() ng-if=ctrl.readOnly><i class="fa fa-eye"></i></button></div></div><div ng-switch=ctrl.pageElement.type><mw-form-question-builder ng-switch-when=question question=ctrl.pageElement.question form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-question-builder><mw-form-image-builder ng-switch-when=image image=ctrl.pageElement.image form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly on-image-selection=ctrl.onImageSelection()></mw-form-image-builder><mw-form-paragraph-builder ng-switch-when=paragraph paragraph=ctrl.pageElement.paragraph form-object=ctrl.formObject on-ready=ctrl.onReady() is-preview=!ctrl.isActive read-only=ctrl.readOnly></mw-form-paragraph-builder></div></div></div>'),e.put("mw-form-paragraph-builder.html",'<div class=mw-form-paragraph-builder-wrapper><div class=mw-form-paragraph-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div class=paragraph-editor ng-form=ctrl.form ng-if=!ctrl.isPreview><textarea msd-elastic class="form-control mw-form-paragraph-textarea" ng-model=ctrl.paragraph.html required ng-attr-id=paragraph-textarea-{{ctrl.id}} ng-readonly=ctrl.readOnly ng-attr-placeholder="{{\'mwForm.paragraph.placeholder\'|translate}}"></textarea><div class=row><br><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><p ng-bind-html=ctrl.paragraph.html></p></div></div></div>'),e.put("mw-form-question-builder.html",'<div class=mw-form-question-builder-wrapper><div class=mw-form-question-builder ng-class="{\'ng-submitted\':ctrl.formSubmitted}"><div ng-form=ctrl.form ng-if=!ctrl.isPreview><div class=form-horizontal><div class=form-group><label ng-attr-for=question-text-{{ctrl.id}} class="col-sm-2 control-label" translate=mwForm.question.text>Tre≈õƒá pytania</label><div class="col-sm-10 col-md-8"><input type=text class=form-control name=text ng-attr-id=question-text-{{ctrl.id}} ng-model=ctrl.question.text ng-readonly=ctrl.readOnly required></div></div><div class="form-group mw-question-type"><label ng-attr-for=question-type-{{ctrl.id}} class="col-sm-2 control-label" translate=mwForm.question.type>Typ pytania</label><div class="col-sm-10 form-inline"><select ng-attr-id=question-type-{{ctrl.id}} ng-options="\'mwForm.question.types.\'+type+\'.name\'|translate for type in ctrl.questionTypes" ng-model=ctrl.question.type ng-change=ctrl.questionTypeChanged() class=form-control ng-disabled=ctrl.readOnly required></select><div class=checkbox ng-if="ctrl.question.type==\'radio\'"><label><input type=checkbox ng-model=ctrl.question.pageFlowModifier ng-change=ctrl.pageFlowModifierChanged() ng-readonly=ctrl.readOnly> <span translate=mwForm.pageFlow.afterQuestionAnswer>Przejd≈∫ do strony w oparciu o odpowied≈∫</span></label></div></div></div></div><div class=row ng-if=ctrl.question.type><div class="mw-form-question-answers-builder col-sm-10 col-sm-offset-2 col-md-8"><div ng-if="ctrl.question.type==\'text\'"><input class=form-control type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></div><div ng-if="ctrl.question.type==\'textarea\'"><textarea class=form-control disabled>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></div><div ng-if="ctrl.question.type==\'radio\' || ctrl.question.type==\'checkbox\'"><mw-question-offered-answer-list-builder question=ctrl.question form-object=ctrl.formObject read-only=ctrl.readOnly></mw-question-offered-answer-list-builder></div><div ng-if="ctrl.question.type==\'priority\'"><mw-question-priority-list-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-priority-list-builder></div></div><div class=col-sm-12 ng-if="ctrl.question.type==\'grid\'"><mw-question-grid-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-grid-builder></div><div class=col-sm-12 ng-if="ctrl.question.type==\'division\'"><mw-question-division-builder question=ctrl.question read-only=ctrl.readOnly></mw-question-division-builder></div></div><br><br><div class=row><div class=col-xs-2><button type=button class="btn btn-primary" ng-click=ctrl.save() translate=mwForm.buttons.questionReady>Gotowe</button></div><div class=col-xs-10><div class=checkbox><label><input type=checkbox ng-model=ctrl.question.required ng-disabled=ctrl.readOnly><span translate=mwForm.question.required>Required</span></label></div></div></div></div><div class=mw-preview ng-if=ctrl.isPreview><div class=mw-question-text>{{ctrl.question.text}} <span ng-if=ctrl.question.required>*</span></div><div class=question-answers ng-switch=ctrl.question.type><div ng-switch-when=text><input class=form-control type=text disabled value="{{\'mwForm.question.preview.text\'|translate}}"></div><div ng-switch-when=textarea><textarea class=form-control type=text disabled>{{\'mwForm.question.preview.textarea\'|translate}}</textarea></div><div ng-switch-when=radio><div class=radio ng-repeat="answer in ctrl.question.offeredAnswers"><label><input type=radio> {{answer.value}}</label></div><div class=radio ng-if=ctrl.question.otherAnswer><label><input type=radio><span translate=mwForm.question.preview.otherAnswer>Inna</span>:</label> <span class=form-inline><input type=text class=form-control disabled></span></div></div><div ng-switch-when=checkbox><div class=checkbox ng-repeat="answer in ctrl.question.offeredAnswers"><label><input type=checkbox> {{answer.value}}</label></div><div class=checkbox ng-if=ctrl.question.otherAnswer><label><input type=checkbox><span translate=mwForm.question.preview.otherAnswer>Inna</span>:</label> <span class=form-inline><input type=text class=form-control disabled></span></div></div><div ng-switch-when=grid><div class=table-responsive><table class="table table-condensed table-striped" border=0 cellpadding=5 cellspacing=0><thead><tr><td></td><td ng-repeat="col in ctrl.question.grid.cols"><label>{{col.label}}</label></td></tr></thead><tbody><tr ng-repeat="row in ctrl.question.grid.rows"><td>{{row.label}}</td><td ng-repeat="col in ctrl.question.grid.cols"><input type=radio></td></tr></tbody></table></div></div><div class=mw-priority-list ng-switch-when=priority><table><thead><tr><th translate=mwForm.question.priority.sorted>Sorted</th><th translate=mwForm.question.priority.available>Available</th></tr></thead><tbody><tr><td class=mw-ordered-items></td><td class=mw-available-items><div class=mw-item ng-repeat="item in ctrl.question.priorityList">{{::item.value}}</div></td></tr></tbody></table></div><div ng-switch-when=division><div class=form-inline style="margin-bottom: 5px" ng-repeat="item in ctrl.question.divisionList"><div class=form-group><label>{{item.value}}</label> <input type=number class=form-control style="width: 80px"> <span>{{ctrl.question.unit}}</span></div></div><div class=form-inline style="margin-bottom: 5px"><div class=form-group><label translate=mwForm.question.division.assignedSumLabel>Przydzielono</label> <input type=number class="form-control strict-validation" style="width: 80px" readonly value=0> <span>{{ctrl.question.unit}} <span translate=mwForm.question.division.fromRequiredLabel>z wymaganych</span> <strong>{{ctrl.question.quantity}}</strong> {{ctrl.question.unit}}</span></div></div></div></div></div></div></div>'),e.put("mw-question-division-builder.html",'<div class=mw-question-division-builder><div class=form-horizontal><div class=form-group><label class="col-sm-2 control-label" translate=mwForm.question.division.quantity>Ilo≈õƒá</label><div class="col-sm-10 col-md-8 form-inline"><input type=number ng-model=ctrl.question.quantity required class=form-control min=1 ng-readonly=ctrl.readOnly></div></div><div class=form-group><label class="col-sm-2 control-label" ng-attr-for=division-unit-{{ctrl.question.id}} translate=mwForm.question.division.unit>Etykieta jednostki</label><div class="col-sm-10 col-md-8 form-inline"><input ng-attr-id=division-unit-{{ctrl.question.id}} type=text ng-model=ctrl.question.unit required class=form-control ng-readonly=ctrl.readOnly></div></div></div><div class="col-sm-10 col-sm-offset-2 col-md-8"><div class=question-division-list ui-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.divisionList role=list><div class=mw-question-division-list-item ng-repeat="item in ctrl.question.divisionList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-division-list-item add-new-item-widget"><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button ng-if=!ctrl.readOnly><input type=text required class=form-control value="Kliknij aby dodaƒá pozycjƒô"></span></div></div></div>'),e.put("mw-question-grid-builder.html",'<div class=mw-question-grid-builder><div class="form-horizontal mw-grid-rows-builder"><div class=mw-grid-row-list ui-sortable=ctrl.rowsSortableConfig ng-model=ctrl.question.grid.rows role=list><div class="mw-grid-item form-group" ng-repeat="row in ctrl.question.grid.rows" role=listitem><label class="col-sm-2 control-label" translate=mwForm.question.grid.rowLabel translate-values="{row: row.orderNo}">Etykieta wiersza {{row.orderNo}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewInput[row.id] type=text ng-model=row.label ng-keypress="ctrl.keyPressedOnInput($event,row, \'row\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeRow(row) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.rowLabel translate-values="{row: ctrl.question.grid.rows.length+1}">Etykieta wiersza {{ctrl.question.grid.rows.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewRow() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddRow\'|translate}}"></span></div></div></div><div class=row><div class="mw-grid-separator col-sm-9 col-sm-offset-1"></div></div><div class="form-horizontal mw-grid-cols-builder"><div class=mw-grid-col-list ui-sortable=ctrl.colsSortableConfig ng-model=ctrl.question.grid.cols role=list><div class="mw-grid-item form-group" ng-repeat="col in ctrl.question.grid.cols" role=listitem><label class="col-sm-2 control-label" translate=mwForm.question.grid.columnLabel translate-values="{col: col.orderNo}">Etykieta kolumny {{col.orderNo}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewInput[col.id] type=text ng-model=col.label ng-keypress="ctrl.keyPressedOnInput($event,col, \'col\')" required class="form-control mw-item-label-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeCol(col) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div></div><div class="mw-grid-item form-group add-new-item-widget" ng-if=!ctrl.readOnly><label class="col-sm-2 control-label" translate=mwForm.question.grid.columnLabel translate-values="{col: ctrl.question.grid.cols.length+1}">Etykieta kolumny {{ctrl.question.grid.cols.length+1}}</label><div class="col-sm-10 col-md-8"><div class=drag-handle></div><span ng-click=ctrl.addNewCol() role=button><input type=text required class=form-control value="{{\'mwForm.question.grid.clickToAddColumn\'|translate}}"></span></div></div></div></div>'),e.put("mw-question-offered-answer-list-builder.html",'<div class=question-offered-answer-list-builder><div class=question-offered-answer-list ui-sortable=ctrl.offeredAnswersSortableConfig ng-model=ctrl.question.offeredAnswers role=list><div class=mw-question-offered-answer ng-repeat="answer in ctrl.question.offeredAnswers" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><input wd-focus-me=ctrl.isNewAnswer[answer.id] type=text ng-model=answer.value ng-keypress=ctrl.keyPressedOnInput($event,answer) required class="form-control offered-answer-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeOfferedAnswer(answer) ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-times"></i></button> <span ng-if=ctrl.question.pageFlowModifier class=form-inline><select ng-options="pageFlow.label|translate:pageFlow for pageFlow in ctrl.possiblePageFlow" ng-model=answer.pageFlow class=form-control ng-disabled=ctrl.readOnly></select></span></div></div><div class="mw-question-offered-answer add-new-answer-widget" ng-if=!ctrl.readOnly><div class=drag-handle></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><span ng-click=ctrl.addNewOfferedAnswer() role=button><input type=text class="form-control offered-answer-value" value="{{\'mwForm.question.buttons.addOption\'|translate}}"></span> <span class=add-custom-answer ng-if=!ctrl.question.otherAnswer><span translate=mwForm.question.orLabel>lub</span> <button role=button ng-click=ctrl.addCustomAnswer() translate=mwForm.question.buttons.addOther>Dodaj "Inne"</button></span></div><div class="mw-question-offered-answer custom-answer" ng-if=ctrl.question.otherAnswer><div class=drag-handle ng-if=!ctrl.readOnly></div><div class=option-type-indicator><i ng-if="ctrl.question.type==\'radio\'" class="fa fa-circle-thin fa-fw"></i> <i ng-if="ctrl.question.type==\'checkbox\'" class="fa fa-square-o fa-fw"></i></div><label translate=mwForm.question.otherLabel>Inna:</label> <input type=text value="{{\'mwForm.question.userAnswer\'|translate}}" class="form-control offered-answer-value" readonly> <button type=button role=button class=remove-item-button ng-click=ctrl.removeCustomAnswer() ng-if=!ctrl.readOnly ng-attr-title="{{\'mwForm.buttons.remove\' | translate}}" popover="{{\'mwForm.buttons.remove\' | translate}}" popover-trigger=mouseenter popover-placement=top><i class="fa fa-times"></i></button></div></div>'),e.put("mw-question-priority-list-builder.html",'<div class=mw-question-priority-list-builder><div class=question-priority-list ui-sortable=ctrl.itemsSortableConfig ng-model=ctrl.question.priorityList role=list><div class=mw-question-priority-list-item ng-repeat="item in ctrl.question.priorityList" role=listitem><div class=drag-handle ng-if=!ctrl.readOnly><i class="fa fa-arrows-v fa-lg handle-inner"></i></div><input wd-focus-me=ctrl.isNewItem[item.id] type=text ng-model=item.value ng-keypress=ctrl.keyPressedOnInput($event,item) required class="form-control item-value" ng-readonly=ctrl.readOnly> <button role=button class=remove-item-button ng-click=ctrl.removeItem(item) ng-if=!ctrl.readOnly><i class="fa fa-times"></i></button></div></div><div class="mw-question-priority-list-item add-new-item-widget" ng-if=!ctrl.readOnly><div class=drag-handle></div><span ng-click=ctrl.addNewItem() role=button><input type=text required class=form-control value="{{\'mwForm.question.priority.clickToAddItem\'|translate}}"></span></div></div>')}]);
angular.module("mwFormBuilder").directive("mwQuestionPriorityListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-priority-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var t=i[e];t.orderNo=e+1}}function t(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var r=this;r.isNewItem={},r.addNewItem=function(e){var t={id:i.get(),orderNo:r.question.priorityList.length+1,value:null};e||(r.isNewItem[t.id]=!0),r.question.priorityList.push(t)},r.question.priorityList||(r.question.priorityList=[],r.addNewItem()),t(r.question.priorityList),r.itemsSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(i,t){e(r.question.priorityList)}},r.removeItem=function(i){var e=r.question.priorityList.indexOf(i);-1!=e&&r.question.priorityList.splice(e,1)},r.keyPressedOnInput=function(i,e){delete r.isNewItem[e.id],13===i.which&&(i.preventDefault(),r.addNewItem())}}],link:function(i,e,t,r){i.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionOfferedAnswerListBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-offered-answer-list-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["FormQuestionBuilderId","mwFormUuid",function(e,r){function o(){if(s.question.offeredAnswers)for(var e=0;e<s.question.offeredAnswers.length;e++){var r=s.question.offeredAnswers[e];r.orderNo=e+1}}function n(){s.question.offeredAnswers&&s.question.offeredAnswers.sort(function(e,r){return e.orderNo-r.orderNo})}var s=this;s.config={radio:{},checkbox:{}},s.isNewAnswer={},n(),s.offeredAnswersSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){o()}},s.addNewOfferedAnswer=function(){var e=s.possiblePageFlow[0],o={id:r.get(),orderNo:s.question.offeredAnswers.length+1,value:null,pageFlow:e};s.isNewAnswer[o.id]=!0,s.question.offeredAnswers.push(o)},s.removeOfferedAnswer=function(e){var r=s.question.offeredAnswers.indexOf(e);-1!=r&&s.question.offeredAnswers.splice(r,1)},s.addCustomAnswer=function(){s.question.otherAnswer=!0},s.removeCustomAnswer=function(){s.question.otherAnswer=!1},s.keyPressedOnInput=function(e,r){delete s.isNewAnswer[r.id],13===e.which&&(e.preventDefault(),s.addNewOfferedAnswer())}}],link:function(e,r,o,n){var s=e.ctrl;s.possiblePageFlow=n.possiblePageFlow}}});
angular.module("mwFormBuilder").directive("mwQuestionGridBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-grid-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){function o(e){if(e)for(var o=0;o<e.length;o++){var r=e[o];r.orderNo=o+1}}function r(e){e.sort(function(e,o){return e.orderNo-o.orderNo})}var i=this;i.isNewInput={},i.addNewRow=function(o){var r={id:e.get(),orderNo:i.question.grid.rows.length+1,label:null};o||(i.isNewInput[r.id]=!0),i.question.grid.rows.push(r)},i.addNewCol=function(o){var r={id:e.get(),orderNo:i.question.grid.cols.length+1,label:null};o||(i.isNewInput[r.id]=!0),i.question.grid.cols.push(r)},i.question.grid||(i.question.grid={rows:[],cols:[]},i.addNewRow(),i.addNewCol(!0)),r(i.question.grid.rows),r(i.question.grid.cols),i.rowsSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){o(i.question.grid.rows)}},i.colsSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(e,r){o(i.question.grid.cols)}},i.removeRow=function(e){var o=i.question.grid.rows.indexOf(e);-1!=o&&i.question.grid.rows.splice(o,1)},i.removeCol=function(e){var o=i.question.grid.cols.indexOf(e);-1!=o&&i.question.grid.cols.splice(o,1)},i.keyPressedOnInput=function(e,o,r){delete i.isNewInput[o.id],13===e.which&&(e.preventDefault(),"row"==r?i.addNewRow():i.addNewCol())}}],link:function(e,o,r,i){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwQuestionDivisionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormQuestionBuilder",scope:{question:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-question-division-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(i){function e(i){if(i)for(var e=0;e<i.length;e++){var n=i[e];n.orderNo=e+1}}function n(i){i.sort(function(i,e){return i.orderNo-e.orderNo})}var t=this;t.isNewItem={},t.addNewItem=function(e){var n={id:i.get(),orderNo:t.question.divisionList.length+1,value:null};e||(t.isNewItem[n.id]=!0),t.question.divisionList.push(n)},t.question.divisionList||(t.question.divisionList=[],t.addNewItem()),n(t.question.divisionList),t.itemsSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(i,n){e(t.question.divisionList)}},t.removeItem=function(i){var e=t.question.divisionList.indexOf(i);-1!=e&&t.question.divisionList.splice(e,1)},t.keyPressedOnInput=function(i,e){delete t.isNewItem[e.id],13===i.which&&(i.preventDefault(),t.addNewItem())}}],link:function(i,e,n,t){i.ctrl}}});
angular.module("mwFormBuilder").factory("FormQuestionBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormQuestionBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{question:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?",options:"=?"},templateUrl:"mw-form-question-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormQuestionBuilderId",function(e,o){function r(){if(i.question.offeredAnswers)for(var e=0;e<i.question.offeredAnswers.length;e++)i.question.offeredAnswers[e].orderNo=e+1}function n(){i.question.offeredAnswers&&i.question.offeredAnswers.sort(function(e,o){return e.orderNo-o.orderNo})}function t(){i.question.offeredAnswers&&i.question.offeredAnswers.forEach(function(e){i.question.pageFlowModifier?e.pageFlow=i.possiblePageFlow[0]:delete e.pageFlow})}var i=this;i.id=o.next(),i.questionTypes=["text","textarea","radio","checkbox","grid","priority","division"],i.formSubmitted=!1,n(),i.save=function(){i.formSubmitted=!0,i.form.$valid&&i.onReady()},i.offeredAnswersSortableConfig={placeholder:"beingDragged",handle:".drag-handle",stop:function(e,o){r()}},i.questionTypeChanged=function(){("radio"==i.question.type||"checkbox"==i.question.type)&&(i.question.offeredAnswers||(i.question.offeredAnswers=[])),"radio"!=i.question.type&&(t(),e(function(){i.question.pageFlowModifier=!1})),"radio"!=i.question.type&&"checkbox"!=i.question.type&&delete i.question.offeredAnswers,"grid"!=i.question.type&&delete i.question.grid,"priority"!=i.question.type&&delete i.question.priorityList},i.pageFlowModifierChanged=function(){t()}}],link:function(e,o,r,n){var t=e.ctrl;t.possiblePageFlow=n.possiblePageFlow}}});
angular.module("mwFormBuilder").factory("FormParagraphBuilderId",function(){var r=0;return{next:function(){return++r}}}).directive("mwFormParagraphBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{paragraph:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?",options:"=?"},templateUrl:"mw-form-paragraph-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormParagraphBuilderId",function(r,e){var t=this;t.id=e.next(),t.formSubmitted=!1,t.save=function(){t.formSubmitted=!0,t.form.$valid&&t.onReady()}}],link:function(r,e,t,o){r.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormPageElementBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageBuilder",scope:{pageElement:"=",formObject:"=",isActive:"=",isFirst:"=",isLast:"=",onReady:"&",readOnly:"=?",options:"=?"},templateUrl:"mw-form-page-element-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(e){var t=this;"question"==t.pageElement.type?t.pageElement.question||(t.pageElement.question={id:e.get(),text:null,type:null,required:!0}):"image"==t.pageElement.type?t.pageElement.image||(t.pageElement.image={id:e.get(),align:"left"}):"paragraph"==t.pageElement.type&&(t.pageElement.paragraph||(t.pageElement.paragraph={id:e.get(),html:""}))}],link:function(e,t,n,l){var o=e.ctrl;o.possiblePageFlow=l.possiblePageFlow,o.hoverIn=function(){o.isHovered=!0},o.hoverOut=function(){o.isHovered=!1},o.editElement=function(){l.selectElement(o.pageElement)},o.removeElement=function(){l.removeElement(o.pageElement)},o.moveDown=function(){l.moveDownElement(o.pageElement)},o.moveUp=function(){l.moveUpElement(o.pageElement)},o.onImageSelection=l.onImageSelection}}});
angular.module("mwFormBuilder").directive("mwFormPageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormBuilder",scope:{formPage:"=",formObject:"=",isFirst:"=",isLast:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-form-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","mwFormUuid",function(e,n){function t(){for(var e=0;e<m.formPage.elements.length;e++)m.formPage.elements[e].orderNo=e+1}function o(){m.formPage.elements.sort(function(e,n){return e.orderNo-n.orderNo})}function r(e,t){return{id:n.get(),orderNo:t,type:e}}function a(e,n,t){var o=e[n];e.splice(n,1),e.splice(t,0,o)}var m=this;m.hoverEdit=!1,m.formPage.namedPage=!!m.formPage.name,o(),m.sortableConfig={placeholder:"beingDragged",handle:".inactive",connectWith:".page-element-list",stop:function(e,n){t()}},m.activeElement=null,m.addElement=function(e){e||(e="question");var n=r(e,m.formPage.elements.length+1);m.activeElement=n,m.formPage.elements.push(n)},m.removeElement=function(e){var n=m.formPage.elements.indexOf(e);m.formPage.elements.splice(n,1)},m.moveDownElement=function(e){var n=m.formPage.elements.indexOf(e),o=n+1;o<m.formPage.elements.length&&a(m.formPage.elements,n,o),t()},m.moveUpElement=function(e){var n=m.formPage.elements.indexOf(e),o=n-1;o>=0&&a(m.formPage.elements,n,o),t()},m.addQuestion=function(){m.addElement("question")},m.addImage=function(){m.addElement("image")},m.addParagraph=function(){m.addElement("paragraph")},m.isElementActive=function(e){return m.activeElement==e},m.selectElement=function(e){m.activeElement=e},m.onElementReady=function(){e(function(){m.activeElement=null})},m.hoverIn=function(){m.hoverEdit=!0},m.hoverOut=function(){m.hoverEdit=!1},m.updateElementsOrderNo=t}],link:function(e,n,t,o){var r=e.ctrl;r.possiblePageFlow=o.possiblePageFlow,r.moveDown=function(){o.moveDownPage(r.formPage)},r.moveUp=function(){o.moveUpPage(r.formPage)},r.removePage=function(){o.removePage(r.formPage)},r.addPage=function(){o.addPageAfter(r.formPage)},e.$watch("ctrl.formPage.elements.length",function(e,n){e!=n&&r.updateElementsOrderNo()}),r.onImageSelection=o.onImageSelection}}});
angular.module("mwFormBuilder").factory("FormImageBuilderId",function(){var e=0;return{next:function(){return++e}}}).directive("mwFormImageBuilder",function(){return{replace:!0,restrict:"AE",require:"^mwFormPageElementBuilder",scope:{image:"=",formObject:"=",onReady:"&",isPreview:"=?",readOnly:"=?",options:"=?",onImageSelection:"&"},templateUrl:"mw-form-image-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout","FormImageBuilderId","mwFormUuid",function(e,r,t){var n=this;n.id=r.next(),n.formSubmitted=!1,n.save=function(){n.formSubmitted=!0,n.form.$valid&&n.onReady()},n.selectImageButtonClicked=function(){var e=n.onImageSelection();e.then(function(e){n.image.src=e})["catch"](function(){})},n.setAlign=function(e){n.image.align=e}}],link:function(e,r,t,n){e.ctrl}}});
angular.module("mwFormBuilder").directive("mwFormConfirmationPageBuilder",function(){return{replace:!0,restrict:"AE",scope:{formObject:"=",readOnly:"=?",options:"=?"},templateUrl:"mw-form-confirmation-page-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["$timeout",function(r){var o=this;o.hoverEdit=!1,o.hoverIn=function(){o.hoverEdit=!0},o.hoverOut=function(){o.hoverEdit=!1}}],link:function(r,o,t){}}});
angular.module("mwFormBuilder").directive("mwFormBuilder",function(){return{replace:!0,restrict:"AE",scope:{formData:"=",readOnly:"=?",options:"=?",formStatus:"=?",confirm:"=",onImageSelection:"&",api:"=?"},templateUrl:"mw-form-builder.html",controllerAs:"ctrl",bindToController:!0,controller:["mwFormUuid",function(a){function e(e){var o=null;return t.possiblePageFlow&&(o=t.possiblePageFlow[0]),{id:a.get(),number:e,name:null,description:null,pageFlow:o,elements:[]}}function o(){for(var a=0;a<t.formData.pages.length;a++)t.formData.pages[a].number=a+1;t.updatePageFlow()}function r(a,e,o){var r=a[e];a.splice(e,1),a.splice(o,0,r)}var t=this;t.formData.pages&&t.formData.pages.length||(t.formData.pages=[],t.formData.pages.push(e(1))),t.addPage=function(){t.formData.pages.push(e(t.formData.pages.length+1))},t.addPageAfter=function(a){var r=t.formData.pages.indexOf(a),n=r+1,l=e(a.number+1);n<t.formData.pages.length?t.formData.pages.splice(n,0,l):t.formData.pages.push(l),o()},t.moveDownPage=function(a){var e=t.formData.pages.indexOf(a),n=e+1;n<t.formData.pages.length&&r(t.formData.pages,e,n),o()},t.moveUpPage=function(a){var e=t.formData.pages.indexOf(a),n=e-1;n>=0&&r(t.formData.pages,e,n),o()},t.removePage=function(a){var e=t.formData.pages.indexOf(a);t.formData.pages.splice(e,1),o()},t.api&&(t.api.reset=function(){for(var a in t.formData)t.formData.hasOwnProperty(a)&&"pages"!=a&&delete t.formData[a];t.formData.pages.length=0,t.formData.pages.push(e(1))})}],link:function(a,e,o){var r=a.ctrl;r.formStatus&&(r.formStatus.form=r.form),r.possiblePageFlow=[];var t={nextPage:!0,label:"mwForm.pageFlow.goToNextPage"};r.possiblePageFlow.push(t),r.isSamePageFlow=function(a,e){return a.page&&e.page&&a.page.id==e.page.id||a.formSubmit&&e.formSubmit||a.nextPage&&e.nextPage},r.updatePageFlow=function(){r.possiblePageFlow.length=1,r.formData.pages.forEach(function(a){r.possiblePageFlow.push({page:{id:a.id,number:a.number},label:"mwForm.pageFlow.goToPage"})}),r.possiblePageFlow.push({formSubmit:!0,label:"mwForm.pageFlow.submitForm"}),r.formData.pages.forEach(function(a){r.possiblePageFlow.forEach(function(e){a.pageFlow?r.isSamePageFlow(e,a.pageFlow)&&(a.pageFlow=e):a.pageFlow=t,a.elements.forEach(function(a){var o=a.question;o&&o.pageFlowModifier&&o.offeredAnswers.forEach(function(a){a.pageFlow&&r.isSamePageFlow(e,a.pageFlow)&&(a.pageFlow=e)})})})})},a.$watch("ctrl.formData.pages.length",function(a,e){r.updatePageFlow()})}}});
angular.module("mwFormBuilder").directive("wdFocusMe",["$timeout","$parse",function(n,o){return{link:function(u,t,c){var e=o(c.wdFocusMe);u.$watch(e,function(o){console.log("value=",o),o===!0&&n(function(){t[0].focus()})}),t.bind("blur",function(){console.log("blur"),u.$apply(e.assign(u,!1))})}}}]).factory("focus",["$timeout","$window",function(n,o){return function(u){n(function(){var n=o.document.getElementById(u);n&&n.focus()})}}]);
"use strict";angular.module("mwFormBuilder").directive("mwConfirmClick",["$window",function(i){return{restrict:"A",link:function(n,r,c){var o=c.wdConfirmClick||"Are you sure?";r.bind("click",function(r){i.confirm(o)&&n.$apply(c.confirmedAction)})}}}]);